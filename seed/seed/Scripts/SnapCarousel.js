(function($){var uniqueId=0;$.fn.SeedCarousel=function(options){var settings=$.extend({},options);return this.each(function(){var $this=$(this);var items=[];var $ul=$('.group > ul');var leftPos=0,rightPos=0,totalWidth=0;var margin=0;var thisId=++uniqueId;var sw=$(window).width();var smallScreen='100';var medScreen='768';var fullScreen='1024';$('.group ul > li').wrapInner("<div></div>");init();function init(){items=$ul.children('li');if(sw<medScreen){items.width('100%');}else if(sw<fullScreen){items.width('50%');}else if(sw>=fullScreen){items.width($('.snap-carousel .group ul').width()/4);}init_positions();bindEvents();}var resizeTimeout;$(window).resize(function(){var nsw=$(window).width();if(sw!=nsw){sw=nsw;clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){if(sw<medScreen){items.width('100%');}else if(sw<fullScreen){items.width('50%');}else if(sw>=fullScreen){items.width($('.snap-carousel .group ul').width()/4);}init_positions();});}});function init_positions(){var ttlWidth=0;for(var i=0;i<items.length;i++){var left=ttlWidth+margin*i;var width=$(items[i]).width();ttlWidth+=width;$(items[i]).css({'left':left,'width':width,'position':'absolute'}).attr('id',thisId+'carouselItem'+i);}}function bindEvents(){$('.right-nav').on('click',function(){slideLeft();});$('.left-nav').on('click',function(){slideRight();});}function slideLeft(){var kills=[];var killItems=[];var i=0;var $item;for(i=0;i<items.length;i++){if(!_slideItem('left',i)){kills.push(i);killItems.push(items[i]);}}for(i=0;i<kills.length;i++){$item=$(killItems[i]);pushNewItem('left',kills[i],$item);killItem($item);}items=$ul.children('li');}function slideRight(){var kills=[];var killItems=[];var i=0;var $item;for(i=items.length-1;i>=0;i--){if(!_slideItem('right',i)){kills.push(i);killItems.push(items[i]);}}for(i=0;i<killItems.length;i++){$item=$(killItems[i]);pushNewItem('right',kills[i],$item);killItem($item);}items=$ul.children('li');}function _slideItem(direction,i){var $item=$(items[i]);var movement=direction=='left'?-$item.width():$item.width();$item.css('left',$item.position().left+movement);if(outOfView(direction,$item)){return false;}return true;}function outOfView(direction,$item){if(direction=='left'){return $item.position().left<=-$item.width();}else{return getPosRight($item)<=0;}}function pushNewItem(direction,index,$item){$item=$item?$(items[index]):$item;var $nItem=$item.clone().detach();if(direction=='left'){$ul.append($nItem);}else{$ul.prepend($nItem);}positionNewItem(direction,$nItem,index);}function positionNewItem(direction,$newItem,index){var $nextItem=getNextItem(direction,index);if(direction=='left'){$newItem.css({'left':$nextItem.position().left+$nextItem.width()+margin});}else{$newItem.css({'left':$nextItem.position().left-($newItem.width()+margin)});}}function getNextItem(direction,index){var maxI=items.length-1;var nIndex=0;if(direction=='left'){nIndex=maxI;}else{nIndex=1;}return $($ul.children('li')[nIndex]);}function getPosRight($item){var position=$item.position();var left=position.left;var width=$item.width();var ulWidth=$ul.width();var logicalRight=left;var relativeRight=ulWidth-logicalRight;return relativeRight;}function killItem($item){$item.detach();}});}})(jQuery);